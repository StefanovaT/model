<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>LOG0502 Create Simple Warehouse Orders (with separate lines for the components) | ERP.net Domain Model </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="LOG0502 Create Simple Warehouse Orders (with separate lines for the components) | ERP.net Domain Model ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ErpNetDocs/model/blob/master/generations/LOG0502.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="log0502-create-simple-warehouse-orders-with-separate-lines-for-the-components">LOG0502 Create Simple Warehouse Orders (with separate lines for the components)</h1>

<h2 id="basic-information">Basic Information</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Module</th>
<th>Logistics.WMS</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Code</td>
<td>LOG0502</td>
</tr>
<tr>
<td style="text-align: left;">Parent Document</td>
<td>Warehouse Requisition</td>
</tr>
<tr>
<td style="text-align: left;">Sub-document</td>
<td>Warehouse Order</td>
</tr>
<tr>
<td style="text-align: left;">Full Name</td>
<td>Create Simple Warehouse Orders (with separate lines for the components)</td>
</tr>
<tr>
<td style="text-align: left;">Status</td>
<td><a class="xref" href="https://erpnetdocs.github.io/tech/advanced/document-flow/generation-procedures.html">NEW</a></td>
</tr>
<tr>
<td style="text-align: left;">Deterministic</td>
<td><a href="xref:deterministic-generations">YES</a></td>
</tr>
<tr>
<td style="text-align: left;">Supports Transitional Documents</td>
<td><a href="xref:transitional-documents">NO</a></td>
</tr>
<tr>
<td style="text-align: left;">Supports Single Execution</td>
<td>YES</td>
</tr>
<tr>
<td style="text-align: left;">Replaces</td>
<td>-</td>
</tr>
<tr>
<td style="text-align: left;">Orphan Rows</td>
<td>Ignore</td>
</tr>
<tr>
<td style="text-align: left;">Split Function</td>
<td>-</td>
</tr>
<tr>
<td style="text-align: left;">Version</td>
<td>Introduced: 2023 Updated: -</td>
</tr>
<tr>
<td style="text-align: left;">Date of Suspension</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="business-logic">Business Logic</h2>
<p>This generation is used to create Warehouse Orders from Warehouse Requisitions when the company is using <a href="xref:composite-products">Composite Products</a>. Thе generation creates warehouse orders for both composite and noncomposite products. What is special about this generation is that it creates two kinds of warehouse order lines for the composite products. One line for the composite product and one line for each of its components.</p>
<p><strong>The Warehouse Order’s header is created based on the Warehouse Requisition’s header as follows:</strong></p>
<pre><code>WarehouseOrder.DocumentDate = WarehouseRequisition.DocumentDate

WarehouseOrder.Warehouse = WarehouseRequisition.Warehouse

WarehouseOrder.WarehouseWorker = NULL
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>The attributes which are not specified here are filled in as described in <a href="../reference/standard-document-attributes.html">Standard Document Attributes</a></p>
</div>
<div class="NOTE">
<h5>Note</h5>
<p>The new Warehouse Order is saved then and only when there is at least one line in it.</p>
</div>
<h2 id="fulfillments">Fulfillments</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Fulfilment Name</th>
<th>WarehouseRequisitionLineToWarehouseOrderLine</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Fulfilment Tracking Type</td>
<td>Fulfilment Table</td>
</tr>
<tr>
<td style="text-align: left;">Parent Entity</td>
<td>WarehouseRequisitionLine</td>
</tr>
<tr>
<td style="text-align: left;">Fulfilment Table</td>
<td>DocumentFulfillment</td>
</tr>
<tr>
<td style="text-align: left;">Parent Entity/ Fulfilment Table Relationship</td>
<td>WarehouseRequisitionLineId = DocumentFulfillment.DocumentLineId</td>
</tr>
</tbody>
</table>
<h2 id="metrics"><a href="../reference/metrics.html">Metrics</a></h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Fulfilment Name</th>
<th style="text-align: center;">Metric Name</th>
<th style="text-align: center;">Measurement Unit</th>
<th style="text-align: left;">Parent Value</th>
<th style="text-align: left;">Fulfilment Table Value</th>
<th style="text-align: left;">New Record</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">WarehouseRequisitionLineToWarehouseOrderLine</td>
<td style="text-align: center;">MQuantityBase</td>
<td style="text-align: center;">WarehouseRequisitionLine.Product.BaseMeasurementUnit</td>
<td style="text-align: left;">WarehouseRequisitionLineLine.QuantityBase</td>
<td style="text-align: left;">DocumentFulfillment.QuantityBase</td>
<td style="text-align: left;">NO</td>
</tr>
<tr>
<td style="text-align: left;">WarehouseRequisitionLineToWarehouseOrderLine</td>
<td style="text-align: center;">MStandardQuantity</td>
<td style="text-align: center;">WarehouseRequisitionLine.Product.BaseMeasurementUnit</td>
<td style="text-align: left;">WarehouseRequisitionLineLine.StandardQuantity</td>
<td style="text-align: left;">DocumentFulfillment.StandardQuantity</td>
<td style="text-align: left;">YES</td>
</tr>
</tbody>
</table>
<p><strong>The Warehouse Order Lines creation</strong>
<br><br>
The lines of the new document are created based on the data of the Planned records in the Document Fulfillments table.
The table contains the information for the Fulfilled Part of quantities by the Warehouse Oders which have already been created.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Note that for the calculation of the Fulfilled Part are taken into account only the recods whoose Fulfillment Type is Planned.</p>
</div>
<br>
<p>The creation starts with determining the kind of the product (composite or not) and the direction of movement.</p>
<p><em>Is the product a composite product?</em>
<br> A product is considered as composite when it has atleast one valid component.
Valid composite product components are those for which:</p>
<ul>
<li>FromDate == null OR &lt;= WarehouseOrder.DocumentDate</li>
<li>ToDate == null OR &gt;= WarehouseOrder.DocumentDate</li>
<li>IsActive == true</li>
</ul>
<p><em>What is the direction on the movement?</em>
<br> It depends on the parent requisition's Requisition Type which can be &quot;Inbound&quot; or &quot;Outbound&quot;.</p>
<p>Depending on the answers on both questions system may create three types of warehouse order lines:</p>
<ul>
<li>a line executing a non-composite product;</li>
<li>a line executing a composite product;</li>
<li>a line/s executing the composite product's components.</li>
</ul>
<p><strong>Non-composite products</strong></p>
<p>If the parent requsition line's products is non-composite, the system will create a &quot;traditional&quot; warehouse order line with Receive or Dispatch task type.</p>
<p><strong>Warehouse Order Lines for the non-composite product are created as follows</strong></p>
<pre><code>WarehouseOrderLine.TaskType = If (WarehouseRequisition.RequisitionType = Inbound )

                            , then WarehouseOrderLine.TaskType = Receive

                            , else WarehouseOrderLine.TaskType = Dispatch
                            
WarehouseOrderLine.LineGroupNo = If all products in the order are non-composite, then 1, else autonumber 1, 2, 3

WarehouseOrderLine.Product = WarehouseRequisitionLine.Product

WarehouseOrderLine.Lot = WarehouseRequisitionLine.Lot

WarehouseOrderLine.SerialNumber = WarehouseRequisitionLine.SerialNumber

WarehouseOrderLine.ProductVariant = WarehouseRequisitionLine.ProductVariant

WarehouseOrderLine.QuantityUnit = WarehouseRequisitionLine.QuantityUnit

WarehouseOrderLine.Quantity =  CONVERT(WarehouseOrderLine.StandardQuantity, WarehouseOrderLine.QuantityUnit)

WarehouseOrderLine.QuantityBase = WarehouseRequisitionLine.REMAINING(MQuantityBase)

WarehouseOrderLine.StandardQuantity = WarehouseRequisitionLine.REMAINING(MStandardQuantity)

WarehouseOrderLine.LogisticUnit = NULL

WarehouseOrderLine.WarehouseZone = NULL

WarehouseOrderLine.WarehouseLocation =NULL

WarehouseOrderLine.ToWarehouseLocation = NULL

WarehouseOrderLine.WarehouseWorker = NULL

WarehouseOrderLine.Notes = WarehouseRequisitionLine.Notes

WarehouseOrderLine.ParentDocument = WarehouseRequisition

WarehouseOrderLine.ParentLineNo = WarehouseRequisitionLine.LineNo
</code></pre>
<p><strong>Composite products</strong></p>
<p>If the parent requsition line contains a composite product, the system will create two sets of Warehouse Order Lines to fulfill it - one for the composite product and one for each of its components.</p>
<p>If the movement type is &quot;Inbound&quot;, the created composite product line is with &quot;Dekit&quot; task type, because it respresents the &quot;disassembly&quot; of the product. On the other hand, the components lines have &quot;Component Receive' task type because they are the ones need to be physically received in the warehouse and put away in the warehouse locations.</p>
<p>The order of the lines of the two sets depends on the value of the <a class="xref" href="https://erpnetdocs.github.io/tech/modules/logistics/wms/how-to/setup-warehouse/warehouse-policies.html">&quot;Dekitting Controlling Level&quot; policy</a>. If the policy's value is 40 or 50, then the dekit line for composite product is created first and then then it is followed by the composite receive lines. If the policy's value is 10, 20 or 30, then the component receive lines are created first and then then they are followed by the dekit line for composite product itself.</p>
<p>This is the opposite of when the movement type is &quot;Outbound&quot;, the created composite product line is with &quot;Kit&quot; task type, because it respresents the &quot;assembly&quot; of the product. On the other hand, the components lines have &quot;Component Dispatch' task type because they are the ones that need to be physically dispatched from the warehouse.</p>
<p>The order of the lines is always the same, the component dispatch lines are created first and they are followed by the kit line for composite product itself.</p>
<p>The link between the two sets (the line of the composite product and the lines for its components) is performed through the &quot;Line Group No&quot; field in the warehouse order line. Component lines have the same &quot;Line Group No&quot; as the &quot;Line Group No&quot; of their composite product line e.g. &quot;1&quot;.</p>
<p><strong>The Warehouse Order Lines for composite products are created as follows</strong></p>
<pre><code>WarehouseOrderLine.TaskType = If (WarehouseRequisition.RequisitionType = Inbound )

                            , then WarehouseOrderLine.TaskType = Dekit

                            , else WarehouseOrderLine.TaskType = Kit
                            
WarehouseOrderLine.LineGroupNo = an autonumber 1, 2, 3 

WarehouseOrderLine.Product = WarehouseRequisitionLine.Product

WarehouseOrderLine.Lot = WarehouseRequisitionLine.Lot

WarehouseOrderLine.SerialNumber = WarehouseRequisitionLine.SerialNumber

WarehouseOrderLine.ProductVariant = WarehouseRequisitionLine.ProductVariant

WarehouseOrderLine.QuantityUnit = WarehouseRequisitionLine.QuantityUnit

WarehouseOrderLine.Quantity =  CONVERT(WarehouseOrderLine.StandardQuantity, WarehouseOrderLine.QuantityUnit)

WarehouseOrderLine.QuantityBase = WarehouseRequisitionLine.REMAINING(MQuantityBase)

WarehouseOrderLine.StandardQuantity = WarehouseRequisitionLine.REMAINING(MStandardQuantity)

WarehouseOrderLine.LogisticUnit = NULL

WarehouseOrderLine.WarehouseZone = NULL

WarehouseOrderLine.WarehouseLocation =NULL

WarehouseOrderLine.ToWarehouseLocation = NULL

WarehouseOrderLine.WarehouseWorker = NULL

WarehouseOrderLine.Notes = WarehouseRequisitionLine.Notes

WarehouseOrderLine.ParentDocument = WarehouseRequisition

WarehouseOrderLine.ParentLineNo = WarehouseRequisitionLine.LineNo
</code></pre>
<br>
<p><strong>The Warehouse Order Lines for the the composite product's components are created as follows</strong></p>
<p>First we are getting all <strong>valid</strong> Composite Product's Components.
Valid composite product components are those for which:</p>
<ul>
<li>FromDate == null OR &lt;= WarehouseOrder.DocumentDate;</li>
<li>ToDate == null OR &gt;= WarehouseOrder.DocumentDate;</li>
<li>IsActive == true.</li>
</ul>
<p>Тhen we are creating new Warehouse Order Line for each of them:</p>
<pre><code>WarehouseOrderLine.TaskType = If (WarehouseRequisition.RequisitionType = Inbound )

                            , then WarehouseOrderLine.TaskType = ComponentReceive

                            , else WarehouseOrderLine.TaskType = ComponentDispatch
                            
WarehouseOrderLine.LineGroupNo = same as the LineGroupNo of the kit/dekit line of the composite product

WarehouseOrderLine.Product = CompositeProductComponent.ComponentProductId	

WarehouseOrderLine.Lot = NULL

WarehouseOrderLine.SerialNumber = NULL

WarehouseOrderLine.ProductVariant = NULL

WarehouseOrderLine.QuantityUnit = FIRST(MeasurementUnits where SystemUnit = Pieces)

WarehouseOrderLine.Quantity = the StandardQuantity of the WarehouseOrderLine created for the composite product * Component.Quantity

WarehouseOrderLine.QuantityBase = the StandardQuantity of the WarehouseOrderLine created for the composite product * Component.Quantity

WarehouseOrderLine.StandardQuantity = the StandardQuantity of the WarehouseOrderLine created for the composite product * Component.Quantity

WarehouseOrderLine.LogisticUnit = NULL

WarehouseOrderLine.WarehouseZone = NULL

WarehouseOrderLine.WarehouseLocation = NULL

WarehouseOrderLine.ToWarehouseLocation = NULL

WarehouseOrderLine.WarehouseWorker = NULL

WarehouseOrderLine.Notes = WarehouseRequisitionLine.Notes

WarehouseOrderLine.ParentDocument = WarehouseRequisition

WarehouseOrderLine.ParentLineNo = WarehouseRequisitionLine.LineNo
</code></pre>
<p>Once all of the Warehouse Order Lines are created and before the document is saved, the generation generates records in the Document Fulfillment table.
These records reflect the quantities fulfilled by the current iteration of the generation procedure and are needed to determine the quantities for subsequent generation iterations.</p>
<p><strong>The new Document Fulfillment is created as follows:</strong></p>
<p><strong>Important:</strong> Note that document fulfillments are NOT created for the warehouse order lines with the product's components.</p>
<pre><code>DocumentFulfillment.Document = WarehouseRequisition

DocumentFulfillment.DocumentLineId = WarehouseRequisitionLineId

DocumentFulfillment.LineNo = WarehouseRequisitionLine.LineNo

DocumentFulfillment.FulfillmentType = Planned

DocumentFulfillment.IsFinal = If (WarehouseOrder.DocumentType.GenerateSingleDocument = true)

                          , then DocumentFulfillment.IsFinal = true

                          , else DocumentFulfillment.IsFinal = false

DocumentFulfillment.LineType = Line

DocumentFulfillment.QuantityBase = WarehouseOrderLine.QuantityBase

DocumentFulfillment.StandardQuantity = WarehouseOrderLine.StandardQuantity

DocumentFulfillment.Product = WarehouseOrderLine.Product

DocumentFulfillment.Lot = WarehouseOrderLine.Lot

DocumentFulfillment.SerialNumber = WarehouseOrderLine.SerialNumber

DocumentFulfillment.ProductVariant = WarehouseOrderLine.ProductVariant

DocumentFulfillment.DestinationEntityName = Wms_Warehouse_Order_Lines
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ErpNetDocs/model/blob/master/generations/LOG0502.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
