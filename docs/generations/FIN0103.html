<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>FIN0103 Create Payment Transactions (Single Execution) | ERP.net Domain Model </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="FIN0103 Create Payment Transactions (Single Execution) | ERP.net Domain Model ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ErpNetDocs/model/blob/master/generations/FIN0103.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="fin0103-create-payment-transactions-single-execution">FIN0103 Create Payment Transactions (Single Execution)</h1>

<h2 id="basic-information">Basic Information</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Module</th>
<th>Finance.Payments</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Code</td>
<td>FIN0103</td>
</tr>
<tr>
<td style="text-align: left;">Parent Document</td>
<td>Payment Slip</td>
</tr>
<tr>
<td style="text-align: left;">Sub-document</td>
<td>Payment Transaction</td>
</tr>
<tr>
<td style="text-align: left;">Full Name</td>
<td>Create Payment Transactions (Single Execution)</td>
</tr>
<tr>
<td style="text-align: left;">Status</td>
<td><a class="xref" href="https://erpnetdocs.github.io/tech/advanced/document-flow/generation-procedures.html">ACTIVE</a></td>
</tr>
<tr>
<td style="text-align: left;">Deterministic</td>
<td><a class="xref" href="https://erpnetdocs.github.io/tech/advanced/document-flow/deterministic-generations.html">YES</a></td>
</tr>
<tr>
<td style="text-align: left;">Supports Transitional Documents</td>
<td><a class="xref" href="https://erpnetdocs.github.io/tech/advanced/document-flow/transitional-documents.html">NO</a></td>
</tr>
<tr>
<td style="text-align: left;">Replaces</td>
<td>CreatePaymentTransaction <br> CreateIncomePaymentTransaction <br> CreateOutcomePaymentTransaction</td>
</tr>
<tr>
<td style="text-align: left;">Orphan Rows</td>
<td>None</td>
</tr>
<tr>
<td style="text-align: left;">Split Function</td>
<td>PaymentSlipAmount</td>
</tr>
<tr>
<td style="text-align: left;">Introduced In Version</td>
<td>2019.1</td>
</tr>
<tr>
<td style="text-align: left;">Date of Suspension</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="business-logic">Business Logic</h2>
<p>This Generation Procedure is used to create Payment Transactions of the current Payment Slip.
For each Payment Slip Amount of the Payment Slip should be created one Payment Transaction.
Currently, for the Generation there are two available settings (set in &quot;PaymentSlipPaymentTransactionsTemplate&quot; of the line of the particular Route):</p>
<ul>
<li>&quot;Create Income Payments&quot; - this setting specifies whether or not payments for Payment Slip Amounts with direction Expense will be created;</li>
<li>&quot;Create Expense Payments&quot; - this setting specifies whether or not payments for Payment Slip Amounts with direction Expense will be created;</li>
</ul>
<p>Current Generation Procedure possesses the functionality to copy Custom Property Values from the Payment Slip Amount to the created Payment Transaction.
Copying happens to Custom Properties, which are set in Payment Transaction Document Definition if the Custom Property of Payment Transaction has the same hereditary root as the Custom Property of Payment Slip Amount
(for more information about hereditary root, see topic <a class="xref" href="https://erpnetdocs.github.io/tech/advanced/stored-attributes/domain-with-property-allowed-values.html">Inheriting and Copying Custom Properties</a>).</p>
<h2 id="fulfillments">Fulfillments</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th>PaymentSlipAmoutToPaymentTransaction</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Parent Entity</td>
<td>PaymentSlipAmout</td>
</tr>
<tr>
<td style="text-align: left;">Child Entity</td>
<td>PaymentTransaction</td>
</tr>
<tr>
<td style="text-align: left;">Parent / Child Relationship</td>
<td>PaymentTransaction.ParentSlipAmountId = PaymentSlipAmout</td>
</tr>
</tbody>
</table>
<h2 id="metrics"><a href="../reference/metrics.html">Metrics</a></h2>
<p>No metrics are used for the current generation procedure.
It will not create new sub-document if there is at least one non-voided execution for the current Payment Slip no matter if the Payment Transaction's Total Amount is different than Payment Slip Amount's Total Amount.</p>
<p><strong>The Payment Transaction’s header is created based on the Payment Slip’s header or on the Payment Slip Amount as follows:</strong></p>
<pre><code>PaymentTransaction.PaymentSlip = PaymentSlip
PaymentTransaction.PaymentType = PaymentSlip.PaymentType
PaymentTransaction.PaymentAccount = PaymentSlip.PaymentAccount
PaymentTransaction.PaymentSlipNo = PaymentSlip.PaymentSlipNo
PaymentTransaction.TotalAmountCurrency = PaymentSlip.DocumentCurrency

PaymentTransaction.ParentPaymentSlipAmount = PaymentSlipAmount
PaymentTransaction.DocumentDate = PaymentSlipAmount.PaymentDate
PaymentTransaction.Party = PaymentSlipAmount.Party
PaymentTransaction.Direction = PaymentSlipAmount.Direction
PaymentTransaction.TotalAmount = IFF (PaymentSlipAmount.TotalAmount != Null, PaymentSlipAmount.TotalAmount, SUM(PaymentSlipLine.Amount[PaymentSlipLine.PaymentSlipAmount = PaymentSlipAmount])
PaymentTransaction.PaymentReason = PaymentSlipAmount.PaymentReason
PaymentTransaction.RequiresAllocation = IFF (PaymentSlipAmount.PaymentReason == PartySystemPaymentReasonId, True, False)

PaymentTransaction.ТоParty = PaymentSlipAmount.Party
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>The attributes which are not specified here are filled in as described in <a href="../reference/standard-document-attributes.html">Standard Document Attributes</a></p>
</div>
<p>The lines of the new document are created based on the Payment Slip Lines.
If there are Payment Slip Lines for current Payment Slip Amount, for each line, one Payment Transaction Line will be created as follows:</p>
<pre><code>PaymentTransactionLine.PaymentOrder = PaymentSlipLine.PaymentOrder
PaymentTransactionLine.CoveredOrderAmount = PaymentSlipLine.CoveredOrderAmount
PaymentTransactionLine.Amount = PaymentSlipLine.Amount
PaymentTransactionLine.AllowOverpayment = true
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ErpNetDocs/model/blob/master/generations/FIN0103.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
