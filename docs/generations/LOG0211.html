<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>LOG0211 Create receipt Store order for the issued products | ERP.net Domain Model </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="LOG0211 Create receipt Store order for the issued products | ERP.net Domain Model ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ErpNetDocs/model/blob/master/generations/LOG0211.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="log0211-create-receipt-store-order-for-the-issued-products">LOG0211 Create receipt Store order for the issued products</h1>

<h2 id="basic-information">Basic Information</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Module</th>
<th>Logistics.Inventory</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Code</td>
<td>LOG0211</td>
</tr>
<tr>
<td style="text-align: left;">Parent Document</td>
<td>Transfer Order</td>
</tr>
<tr>
<td style="text-align: left;">Sub-document</td>
<td>Store Order</td>
</tr>
<tr>
<td style="text-align: left;">Full Name</td>
<td>Create receipt Store order for the issued products</td>
</tr>
<tr>
<td style="text-align: left;">Status</td>
<td><a class="xref" href="https://erpnetdocs.github.io/tech/advanced/document-flow/generation-procedures.html">ACTIVE</a></td>
</tr>
<tr>
<td style="text-align: left;">Deterministic</td>
<td><a class="xref" href="https://erpnetdocs.github.io/tech/advanced/document-flow/deterministic-generations.html">NO</a></td>
</tr>
<tr>
<td style="text-align: left;">Supports Transitional Documents</td>
<td><a class="xref" href="https://erpnetdocs.github.io/tech/advanced/document-flow/transitional-documents.html">NO</a></td>
</tr>
<tr>
<td style="text-align: left;">Supports Single Execution</td>
<td>YES</td>
</tr>
<tr>
<td style="text-align: left;">Replaces</td>
<td>GenerateSeparateReceiptStoreOrders</td>
</tr>
<tr>
<td style="text-align: left;">Orphan Rows</td>
<td>Forbid</td>
</tr>
<tr>
<td style="text-align: left;">Split Function</td>
<td></td>
</tr>
<tr>
<td style="text-align: left;">Introduced In Version</td>
<td>2024 SP2</td>
</tr>
<tr>
<td style="text-align: left;">Date of Suspension</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="business-logic">Business Logic</h2>
<p>This generation procedure is used to create receipt <strong>Store Orders (SO)</strong> from <strong>Transfer Orders (TO)</strong>.</p>
<p>It is used in <strong>sequential execution flows</strong>, meaning that it waits for the actual stock to be issued from the originating Store before proceeding with the creation of the receipt SOs. This ensures that no receiving SO is generated until the goods have physically left the sending warehouse, ensuring accurate stock movement and synchronization between the warehouses.</p>
<p>In other words, this generation procedure specifically creates receipt SOs only for products that <strong>have already been issued from the other store</strong>, meaning there are created, released, and non-voided Store Transactions for these lines.</p>
<p>The SO lines contain detailed information about the execution of the issued lines, including the actual issued quantity, lot number, serial number, cost, and other relevant data.</p>
<p>This generation procedure is typically configured in <strong>combination with a second procedure, <a href="LOG0212.html">LOG0212</a></strong>, which creates SOs for products that have not yet been issued. While <strong>LOG0211</strong> provides details about what has already been issued and is currently expected, <strong>LOG0212</strong> indicates what remains to be issued and is planned to be received in the future.</p>
<div class="NOTE">
<h5>Note</h5>
<p><strong>IMPORTANT:</strong> Note that document routes for both generation procedures <strong>must be set up to create different Document Types</strong> otherwise, they won’t function correctly.</p>
</div>
<p><strong>The new SO's header is created as follows:</strong></p>
<pre><code>StoreOrder.DocumentDate = Today

StoreOrder.PlanningOnly = False

StoreOrder.Store = TransferOrder.ToStore

StoreOrder.EnterpriseCompanyLocation =  

​                          if (TransferOrder.ToStore.EnterpriseCompanyLocation != null)

​                          , then TransferOrder.ToStore.EnterpriseCompanyLocation

​                          , else TransferOrder.EnterpriseCompanyLocation

StoreOrder.MovementType = Receipt

StoreOrder.DueDate = TransferOrder.DefaultDueDateIn

StoreOrder.PlannedReleaseDate = TransferOrder.DefaultDueDateIn

StoreOrder.PlannedCompletionDate = TransferOrder.DefaultDueDateIn

StoreOrder.CurrencyDirectory =  TransferOrder.CurrencyDirectory 

StoreOrder.DocumentCurrency =  

​                          if (TransferOrder.ToStore.Currency != null)

​                          , then TransferOrder.ToStore.Currency

​                          , else Error &quot;The field 'Document Currency' in the Store Order cannot be filled because currency for the receipt store is not specified.&quot;

StoreOrder.FromParty = TransferOrder.FromParty

StoreOrder.ToParty = TransferOrder.FromStore
</code></pre>
<h2 id="fulfillments">Fulfillments</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th>IssueStoreTransactionLineToStoreOrderLine</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Parent Entity</td>
<td>StoreTransactionLines (where &quot;StoreTransactionLine.ParentStoreOrderLine.ParentLineId =  Id of any TransferOrderLine of the generating TransferOrder&quot; AND &quot;StoreTransactionLine.StoreTransaction.MovementType = Issue&quot; AND &quot;StoreTransactionLine.Document.State = RELEASE&quot; AND &quot;StoreTransactionLine.Document.Void = False&quot;)</td>
</tr>
<tr>
<td style="text-align: left;">Child Entity</td>
<td>StoreOrderLine</td>
</tr>
<tr>
<td style="text-align: left;">Parent / Child Relationship</td>
<td>StoreOrderLine.ParentDocument = StoreTransaction; StoreOrderLine.ParentLineNo = StoreTransaction.LineNo</td>
</tr>
</tbody>
</table>
<h2 id="metrics"><a href="../reference/metrics.html">Metrics</a></h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Fulfillment Name</th>
<th style="text-align: center;">Metric Name</th>
<th style="text-align: center;">Measurement Unit</th>
<th style="text-align: left;">Parent Value</th>
<th style="text-align: left;">Child Value</th>
<th style="text-align: left;">New Record</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">IssueStoreTransactionLineToStoreOrderLine</td>
<td style="text-align: center;">MStandardQuantityBase</td>
<td style="text-align: center;">StoreTransactionLine.Product.BaseMeasurementUnit</td>
<td style="text-align: left;">StoreTransactionLine.StandardQuantityBase</td>
<td style="text-align: left;">StoreOrderLine.StandardQuantityBase</td>
<td style="text-align: left;">YES</td>
</tr>
<tr>
<td style="text-align: left;">IssueStoreTransactionLineToStoreOrderLine</td>
<td style="text-align: center;">MQuantity</td>
<td style="text-align: center;">StoreTransactionLine.QuantityUnit</td>
<td style="text-align: left;">StoreTransactionLine.Quantity</td>
<td style="text-align: left;">StoreOrderLine.Quantity</td>
<td style="text-align: left;">NO</td>
</tr>
<tr>
<td style="text-align: left;">IssueStoreTransactionLineToStoreOrderLine</td>
<td style="text-align: center;">MQuantityBase</td>
<td style="text-align: center;">StoreTransactionLine.Product.BaseMeasurementUnit</td>
<td style="text-align: left;">StoreTransactionLine.QuantityBase</td>
<td style="text-align: left;">StoreOrderLine.QuantityBase</td>
<td style="text-align: left;">NO</td>
</tr>
<tr>
<td style="text-align: left;">IssueStoreTransactionLineToStoreOrderLine</td>
<td style="text-align: center;">MLineCost</td>
<td style="text-align: center;">StoreTransactionLine.Document.EnterpriseCompany.BaseCurrency</td>
<td style="text-align: left;">StoreTransactionLine.LineBaseCost</td>
<td style="text-align: left;">StoreOrderLine.LineCost</td>
<td style="text-align: left;">NO</td>
</tr>
</tbody>
</table>
<p><strong>The lines of the new SO are created as follows:</strong></p>
<pre><code>StoreOrderLine.LineNo = autonumber 10, 20, 30

StoreOrderLine.Product = StoreTransactionLine.Product

StoreOrderLine.ProductVariant = StoreTransactionLine.ProductVariant

StoreOrderLine.StoreBin = CAST(StoreTransactionLine.ParentStoreOrderLine.ParentLineId, TransferOrderLines).ToStoreBin

StoreOrderLine.SerialNumber = StoreTransactionLine.SerialNumber

StoreOrderLine.Quantity = StoreTransactionLine.REMAINING(MQuantity)

StoreOrderLine.QuantityUnit = StoreTransactionLine.QuantityUnit

StoreOrderLine.QuantityBase = StoreTransactionLine.REMAINING(MQuantityBase)

StoreOrderLine.StandardQuantityBase = StoreTransactionLine.REMAINING(MStandardQuantityBase)

StoreOrderLine.LineCost = CONVERT(StoreOrderLine.Document.DocumentCurrency, StoreTransactionLine.REMAINING(MUnitCost)

StoreOrderLine.UnitCost =
                 if (StoreOrderLine.LineCost != 0.00), then StoreOrderLine.CONVERT(StoreOrderLine.Document.DocumentCurrency, StoreTransactionLine.REMAINING(MUnitCost)/Quantity

                 else 0.00
                         
StoreOrderLine.Lot = StoreTransactionLine.Lot

StoreOrderLine.GuaranteePeriodDays =
                 if(StoreTransactionLine.GuaranteePeriodDays != null), then StoreTransactionLine.GuaranteePeriodDays

                 else Product.GuaranteePeriodDays

StoreOrderLine.SalesOrderLine = null

StoreOrderLine.Notes = CAST(StoreTransactionLine.ParentStoreOrderLine.ParentLineId, TransferOrderLines).Notes

StoreOrderLine.PersistLot = false

StoreOrderLine.ParentDocument = StoreTransaction

StoreOrderLine.ParentLineNo = StoreTransactionLine.LineNo

StoreOrderLine.ParentLineId = StoreTransactionLine.ParentStoreOrderLine.ParentLineId 

StoreOrderLine.TransactionTimestamp = null

StoreOrderLine.ForOrdering = false

</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>WARNING: Any of the Store Orders created according to the description above is saved then and only when there is at least one line in it.</p>
</div>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ErpNetDocs/model/blob/master/generations/LOG0211.md/#L1" class="edit-link">Suggest improvement to this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
